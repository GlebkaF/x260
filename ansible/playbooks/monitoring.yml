---
# Glances: lightweight web UI for basic server metrics (CPU, RAM, disk, network).
# Run: ansible-playbook -i inventory/hosts.yml playbooks/monitoring.yml

- name: Glances monitoring
  hosts: x260_servers
  become: true
  tasks:
    - name: Install Glances
      ansible.builtin.apt:
        name: glances
        state: present

    - name: Deploy Glances web systemd unit
      ansible.builtin.copy:
        src: glances-web.service
        dest: /etc/systemd/system/glances-web.service
        mode: "0644"

    - name: Enable and start Glances web
      ansible.builtin.systemd:
        name: glances-web
        state: started
        enabled: true
        daemon_reload: true
