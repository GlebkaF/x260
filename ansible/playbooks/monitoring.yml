---
# Minimal overview dashboard: one page with CPU, RAM, disk, load. No heavy deps.
# Run: ansible-playbook -i inventory/hosts.yml playbooks/monitoring.yml

- name: Overview dashboard
  hosts: x260_servers
  become: true
  tasks:
    - name: Ensure overview script is executable
      ansible.builtin.file:
        path: /opt/x260/scripts/overview_server.py
        mode: "0755"

    - name: Deploy overview server systemd unit
      ansible.builtin.copy:
        src: overview-server.service
        dest: /etc/systemd/system/overview-server.service
        mode: "0644"

    - name: Enable and start overview server
      ansible.builtin.systemd:
        name: overview-server
        state: started
        enabled: true
        daemon_reload: true
